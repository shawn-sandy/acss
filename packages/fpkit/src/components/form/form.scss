// Import checkbox wrapper component styles
@use "./checkbox";

:root {
  --input-border-color: var(--color-border);
  --input-appearance: none;
  --input-bg: inherit;
  --input-border: none;
  --input-outline: thin solid var(--input-border-color);
  --input-padding-inline: 0.6rem;
  --input-padding-block: 0.4rem;
  --input-radius: --var(--radius);
  --input-fs: var(--fs);
  --input-width: clamp(200px, 100%, 500px);

  // Focus state variables (NEW - for accessibility)
  --input-focus-outline: medium solid var(--input-border-color);
  --input-focus-outline-offset: 0;

  // Disabled state variables (NEW)
  --input-disabled-bg: var(--color-disabled-bg);
  --input-disabled-opacity: 0.6;
  --input-disabled-cursor: not-allowed;

  // Placeholder variables
  --placeholder-color: var(--color-text-tertiary);
  --placeholder-style: italic;
  --placeholder-fs: smaller;

  --form-direction: column;
  --select-arrow: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20'><polyline points='6,9 10,13 14,9' stroke='%23000000' stroke-width='1.5' fill='none' /></svg>");

  /* ==========================================================================
     Size Tokens
     ========================================================================== */

  --checkbox-size-xs: 0.875rem; /* 14px - extra small */
  --checkbox-size-sm: 1rem; /* 16px */
  --checkbox-size-md: 1.25rem; /* 20px */
  --checkbox-size-lg: 1.5rem; /* 24px */

  /* Gap tokens for each size variant */
  --checkbox-gap-xs: 0.375rem; /* 6px */
  --checkbox-gap-sm: 0.5rem; /* 8px */
  --checkbox-gap-md: 0.5rem; /* 8px - default */
  --checkbox-gap-lg: 0.625rem; /* 10px */

  /* ==========================================================================
     Base Properties
     ========================================================================== */

  --checkbox-size: var(--checkbox-size-md);
  --checkbox-bg: var(--color-surface);
  --checkbox-border: 0.125rem solid var(--color-neutral-600); /* 2px border */
  --checkbox-border-color: var(--color-neutral-600); /* Gray 500 */
  --checkbox-radius: 0.25rem; /* 4px */
  --checkbox-cursor: pointer;
  --checkbox-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /* ==========================================================================
     Checked State Properties
     ========================================================================== */

  --checkbox-checked-outline-color: var(--color-success);
  --checkbox-checked-bg: var(--color-success);
}

form {
  display: flex;
  flex-direction: var(--form-direction);
  gap: 1rem;
  > div {
    display: flex;
    gap: 1rem;
    flex-direction: var(--form-direction);
  }

  label {
    display: block;
  }
}

input {
  -webkit-appearance: var(--input-appearance);
  -moz-appearance: var(--input-appearance);
  appearance: var(--input-appearance);
  width: var(--input-width);
  border: var(--input-border);
  outline: var(--input-outline);
  padding-inline: var(--input-padding-inline);
  padding-block: var(--input-padding-block);
  border-radius: var(--input-radius);
  background-color: var(--input-bg, var(--color-surface));

  &:focus-visible,
  &:focus {
    outline: var(--input-focus-outline);
    outline-offset: var(--input-focus-outline-offset);
  }

  &[aria-disabled="true"],
  &:disabled {
    --input-border-color: var(--color-border-subtle);
    background-color: var(--input-disabled-bg);
    opacity: var(--input-disabled-opacity);
    cursor: var(--input-disabled-cursor);
    text-transform: capitalize;
    text-decoration: line-through;
  }
}

input[type]:not([type="checkbox"], [type="radio"]),
textarea,
select {
  &::placeholder {
    color: var(--placeholder-color);
    font-style: var(--placeholder-style);
    font-size: var(--placeholder-fs);
    text-transform: capitalize;
  }
  &[aria-required="true"] {
    &::placeholder {
      color: var(--color-required, var(--placeholder-color));
      font-weight: 600;
      &::after {
        content: "* ";
      }
    }
  }
}

input[type="checkbox"] {
  opacity: 1;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  margin: 0;
  cursor: var(--checkbox-cursor);
  flex-shrink: 0; // Prevent checkbox from shrinking in flex layout

  &:checked {
    background-color: var(--checkbox-bg, red);
    outline: var(--checkbox-checked-outline-color) solid 2px;
    background: var(--checkbox-checked-bg)
      url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='white'><path d='M6.173 11.414l-3.89-3.89 1.414-1.414 2.476 2.475 5.657-5.657 1.414 1.414z'/></svg>")
      no-repeat center center;
  }
}

select {
  border: var(--input-outline);
  outline: none;
  -webkit-appearance: none; /* Remove default arrow in Chrome and Safari */
  -moz-appearance: none; /* Remove default arrow in Firefox */
  appearance: none; /* Remove default arrow in other browsers */
  background: var(--select-arrow) no-repeat;
  background-position: right 0.5rem top 50%;
  padding-inline-end: 0;
}
